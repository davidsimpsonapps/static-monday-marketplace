---
layout: base.njk
pagination:
  data: categories
  size: 1
  alias: category
permalink: "categories/{{ category.id }}/"
---

<div class="container mx-auto px-4 py-8">


  <div class="bg-white rounded-lg shadow-md p-6 mb-8">
    <div class="flex items-center mb-4">
      {% if category.logoUrl %}
        <img src="{{ category.logoUrl }}" alt="{{ category.name }} logo" class="w-16 h-16 mr-4">
      {% endif %}
      <div>
        <h1 class="text-3xl " style="color: {{ category.textColor or '#323338' }}">{{ category.name }}</h1>
        <p class="text-gray-600 mt-2">{{ category.description }}</p>
      </div>
    </div>
  </div>

  <h2 class="text-2xl  mb-6">Apps in this Category</h2>
  
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    {% for app in marketplace | filterByCategory(category.id) | sortByInstalls(installs or []) %}
      <a href="/apps/{{ app.id }}/" class="block bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-200">
        <div class="p-6">
          <div class="flex items-center justify-between mb-4">
            {% if app.logo_url %}
              <img src="{{ app.logo_url }}" alt="{{ app.name }} logo" class="w-16 h-16 mb-4 rounded-lg">
            {% endif %}
          </div>
          <h2 class="text-xl font-semibold mb-2">{{ app.name }}</h2>
          <p class="text-gray-600 mb-4">{{ app.short_description }}</p>
    
          <!--<p class="text-gray-600 mb-4">App IDs: {{ app.id }} • {{app.app_id}}</p>-->
          
          {% set rating = ratings | findRatingById(app.app_id) %}
          {% if rating %}
            <div class="flex items-center mt-1 text-gray-400">
              <span class="text-yellow-500 ">★</span>
              <span class="ml-1">{{ rating.rating }}</span>
              <span class=" ml-1">({{ rating.count }})</span>
            </div>
          {% endif %}
          {% if installs %}
            <p class="text-gray-600 text-sm mb-4">
              Installs: {{ installs | findInstallsById(app.app_id) | numberFormat }}
              {% set rating = ratings | findRatingById(app.app_id) %}
              •
              Updated: {{ app.app_live_version.updated_at | formatDate }}
            </p>
          {% endif %}
            
          <div class="flex flex-wrap gap-2">
            {% for categoryId in app.marketplace_category_ids %}
              {% set category = categories | findCategoryById(categoryId) %}
              {% if category %}
                <span class="px-2 py-1 text-sm rounded-full" style="background-color: {{ category.backgroundColor or '#ECEFF8' }}; color: {{ category.textColor or '#323338' }}">
                  {{ category.name }}
                </span>
              {% endif %}
            {% endfor %}
          </div>
        </div>
      </a>
    {% endfor %}
  </div>
</div> 